<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="local.js"></script>
<script src="api_key.js"></script>
<script id="config" type="text/javascript" charset="utf-8">
  var $parameters = {
    urlname: "meetup-api-testing",
    width: 240,
		_height: 450,
    _name: "MUG Badge",
    _description: "Shows basic stats on your favorite Meetup group."
  };
  var $queries = {
    groups: function() { 
      return mup_widget.api_call("/groups", {group_urlname: $parameters.urlname});
    }
  };
</script>
<link rel="stylesheet" type="text/css" href="http://static2.dev.meetupstatic.com/style/widget.css">
<script type="text/javascript" charset="utf-8">
	mup_widget.with_jquery(function($, ctx) {
				months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
				numberFormat = function(nStr){
					  nStr += '';
					  x = nStr.split('.');
					  x1 = x[0];
					  x2 = x.length > 1 ? '.' + x[1] : '';
					  var rgx = /(\d+)(\d{3})/;
					  while (rgx.test(x1))
					    x1 = x1.replace(rgx, '$1' + ',' + '$2');
					  return x1 + x2;
					},
				addLeadingZero = function( num ) {
						return (num < 10) ? ('0' + num) : num;
					},
				getTwoDigitYear = function( yr ) {
						return yr.substring(2,4);
					},
				getFormattedDate = function( millis ) {
						var date = new Date( millis );
						return addLeadingZero( date.getDate() ) + ' ' + months[date.getMonth()] + ' ' + getTwoDigitYear( date.getFullYear().toString() );
					},
				getFormattedTime = function( millis ) {
						var	time = new Date( millis ),
								hours = time.getHours(),
								min = time.getMinutes(),
								ampm = (hours > 11) ? 'PM' : 'AM';
						min = (min < 10) ? ('0' + min) : min;
						hours = (hours == 0) ? 1 : hours;
						hours = (hours > 12) ? hours-12 : hours;
						return hours + ':' + min + ' ' + ampm;
					},
				getFormattedCity = function( city, state ) {
						return city + (state == undefined ? "" : ", " + state);
					},
				getFormattedVenue = function( venue ) {
						return (venue != null) ? venue : 'Venue TBD';
					},
				addLink = function( content, link ) {
						return '<a href="' + link + '">' + content + '</a>';
					};
        $(function() {$(".mug-widget").width($parameters.width);});

	    $.getJSON($queries.groups(), function(data) {
	        if (data.status && data.status.match(/^200/) == null) {
	            alert(data.status + ": " + data.details);
	        } else {
	            var group = data.results[0];
                $('.mug-widget', ctx).append(
                    '<div class="mup-widget">\
                        <div class="mup-hd">\
						    <h3>' + addLink(group.name, group.link) + '</span></h3>\
						    <h4>' + numberFormat(group.members) + ' '+group.who'</h4>\
                            <h4>Est.'+ getFormattedDate(group.created)+'</h4>\
					    </div>\
                    </div>');
            }
        });
    });



</script>
<style type="text/css" media="screen">
.mup-widget-3 .mup-widget {
	background: #1A1A1A;
	color: #f2f2f2;
	font-family: lucida grande, arial, verdana, san-serif;
	font-size: 13px;
	border-radius: 5px;
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-hd {
	padding: 6px 6px 0;
}
.mup-widget-3 .mup-widget .mup-hd a,
.mup-widget-3 .mup-widget .mup-hd a:active,
.mup-widget-3 .mup-widget .mup-hd a:visited,
.mup-widget-3 .mup-widget .mup-hd a:hover {
	color: #f2f2f2;
	text-decoration: none;
}
.mup-widget-3 .mup-widget .mup-bd {
	padding: 0 6px;
}
.mup-widget-3 .mup-widget .mup-ft {
	-webkit-border-bottom-right-radius: 5px;
	-webkit-border-bottom-left-radius: 5px;
	-moz-border-radius-bottomright: 5px;
	-moz-border-radius-bottomleft: 5px;
	border-bottom-right-radius: 5px;
	border-bottom-left-radius: 5px;
}
.mup-widget-3 .mup-widget a,
.mup-widget-3 .mup-widget a:active,
.mup-widget-3 .mup-widget a:visited,
.mup-widget-3 .mup-widget a:hover {
	color: #2261A0;
	text-decoration: none;
}
.mup-widget-3 .mup-widget h3 {
	font-size: 20px;
	font-weight: bold;
	color: #AAA;
}
.mup-widget-3 .mup-widget h4 {
	font-size: 13px;
	margin-bottom: 8px;
	color: #f2f2f2;
}
.mup-widget-3 .mup-widget .mup-list {
	border-radius: 5px;
	-moz-border-radius: 5px;
	-webkit-border-radius: 5px;
	padding:0;
}
.mup-widget-3 .mup-widget .mup-list li {
	position: relative;
	padding: 12px 6px 12px 0;
	border-top-color: #1A1A1A;
	border-top-style: solid;
	border-top-width: 1px;
	background: #333;
	-webkit-border-top-right-radius: 5px;
	-moz-border-radius-topright: 5px;
	border-top-right-radius: 5px;
	overflow: hidden;
}
.mup-widget-3 .mup-widget .mup-list li:first-child {
	-webkit-border-top-left-radius: 5px;
	-webkit-border-top-right-radius: 5px;
	-moz-border-radius-topleft: 5px;
	-moz-border-radius-topright: 5px;
	border-top-left-radius: 5px;
	border-top-right-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-list li:last-child {
	-webkit-border-bottom-right-radius: 5px;
	-webkit-border-bottom-left-radius: 5px;
	-moz-border-radius-bottomright: 5px;
	-moz-border-radius-bottomleft: 5px;
	border-bottom-right-radius: 5px;
	border-bottom-left-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-when,
.mup-widget-3 .mup-widget .mup-where {
	white-space: nowrap;
}
.mup-widget-3 .mup-widget .mup-when {
	padding-bottom: 4px;
}
.mup-widget-3 .mup-widget .mup-time {
	display: inline-block;
	width: 60px;
	font-size: 10px;
	text-align: right;
}
.mup-widget-3 .mup-widget .mup-city {
	padding-left: 8px;
	display: inline-block;
}
.mup-widget-3 .mup-widget .mup-venue {
	padding-left: 8px;
	font-size: 10px;
	display: inline-block;
}
.mup-widget-3 .mup-widget .mup-badge{
	position: absolute;
	right: 0;
	top: 0;
	font-size: 10px;
	height: 14px;
	color: #1A1A1A;
}
.mup-widget-3 .mup-widget .mup-badge .mup-badge-label {
	font-size: 8px;
}
.mup-widget-3 .mup-widget .mup-rsvpcount {
	background: #2261A0;
	color: #1A1A1A;
	padding: 2px 4px;
	-webkit-border-top-right-radius: 5px;
	-moz-border-radius-topright: 5px;
	border-top-right-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-rsvpcount-1 {
	background: #2261A0;
	padding: 2px 4px;
	-webkit-border-top-right-radius: 5px;
	-moz-border-radius-topright: 5px;
	border-top-right-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-logo {
	padding: 6px;
}
.mup-widget-3 .mup-widget .mup-getwdgt {
	border-top-color: #1A1A1A;
	border-top-style: solid;
	border-top-width: 1px;
	padding: 3px;
	font-size: 8px;
	text-align: center;
	background: #0A0A0A;
	-webkit-border-bottom-right-radius: 5px;
	-webkit-border-bottom-left-radius: 5px;
	-moz-border-radius-bottomright: 5px;
	-moz-border-radius-bottomleft: 5px;
	border-bottom-right-radius: 5px;
	border-bottom-left-radius: 5px;
}
.mup-widget-3 .mup-widget .mup-getwdgt a {
	color: #f2f2f2;
}
</style>
</head>
<body>
	<div class="mup-widget-3"></div>
</body>
</html>
